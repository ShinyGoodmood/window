<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8" />
    <title>Webcore Window</title>

    <style>
        /* VARIABLES */
        :root {
            --border-light: #c9c9ff;
            --border-dark: #757575;
            --bg-window: #ffffff;
            --bg-header: #ffffff;
            --bg-content: #ffffff;
            --text: #000000;
            --accent: #000000;
            --font: "Courier New", monospace;
        }

        * {
            box-sizing: border-box;
        }

        body {
            margin: 0;
            min-height: 100vh;
            /* background: #0e0e14; */
            background: #FFFFFF;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: var(--font);
            color: var(--text);
        }

        /* MAIN WINDOW */
        section.window {
            width: 40%;
            height: 60vh;
            background: var(--bg-window);
            box-shadow:
                inset 2px 2px 0 var(--border-light),
                inset -2px -2px 0 var(--border-dark);
            position: relative;
            display: flex;
            flex-direction: column;
        }

        /* HEADER */
        .window-header {
            background: var(--bg-header);
            padding: 5px 8px;
            font-size: 0.8rem;
            border-bottom: 1px solid var(--border-dark);
            display: flex;
            justify-content: space-between;
            box-shadow:
                inset 1px 1px 0 var(--border-light),
                inset -1px -1px 0 var(--border-dark);
            width: 100%;
        }

        /* CONTENT */
        .window-body {
            flex: 1;
            display: flex;
            padding: 10px;
            gap: 10px;
            align-items: center;
        }

        /* ICONS */
        .icons {
            display: flex;
            flex-direction: column;
            gap: 10px;
            height: 100%;
            margin-top: 10px;
        }

        .icon {
            width: 60px;
            text-align: center;
            cursor: pointer;
            font-size: 0.7rem;
            color: #fff;
        }

        .icon-title {
            display: block;
            margin-top: 4px;
            color: var(--text);
        }

        .icon-box {
            background: var(--accent);
            padding: 10px;

            box-shadow:
                inset 2px 2px 0 var(--border-light),
                inset -2px -2px 0 var(--border-dark);
        }

        /* WEBCAM */
        .webcam {
            position: absolute;
            left: 50%;
            top: 35%;
            transform: translate(-55%, -55%);
            flex: 0 0 auto;
            width: 400px;
            height: 250px;
            box-sizing: border-box;
            background: var(--bg-content);
            box-shadow:
                inset 1px 1px 0 var(--border-light),
                inset -1px -1px 0 var(--border-dark);
            overflow: hidden;
            min-height: 0;
            display: flex;
            flex-direction: column;
            align-items: stretch;
            justify-content: flex-start;
            max-width: calc(100% - 20px);
            max-height: calc(100% - 20px);
        }

        .webcam-body {
            padding: 1px;
            flex: 1 1 auto;
            min-height: 0;
            overflow: hidden;
        }

        .webcam-body img {
            display: block;
            box-sizing: border-box;
            width: 100%;
            height: 100%;
            object-fit: cover;
            object-position: center center;
            image-rendering: auto;
        }

        /* TEXT CONTENT */
        .text-content {
            width: 100%;
            padding: 5px;
            font-size: 0.70rem;
            line-height: 1;
            white-space: pre-wrap;
            text-align: left;
            /* align-self: stretch; */
        }

        /* POPUP WINDOW */
        .description {
            position: absolute;
            bottom: 15%;
            right: 5%;
            width: 400px;
            height: 150px;
            background: var(--bg-window);
            box-shadow:
                inset 2px 2px 0 var(--border-light),
                inset -2px -2px 0 var(--border-dark);
            /* display: none; */
            display: block;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .description-header {
            background: var(--bg-header);
            padding: 5px 8px;
            font-size: 0.8rem;
            border-bottom: 1px solid var(--border-dark);
            display: flex;
            justify-content: space-between;
            box-shadow:
                inset 1px 1px 0 var(--border-light),
                inset -1px -1px 0 var(--border-dark);
        }

        .description-body {
            padding: 10px;
            font-size: 0.8rem;
            flex: 1 1 auto;
            min-height: 0;
        }

        .close {
            cursor: pointer;
        }

        /* RESPONSIVE */
        @media (max-width: 800px) {
            section.window {
                width: 90%;
                height: auto;
            }

            .window-body {
                flex-direction: column;
            }

            .description {
                width: 80%;
                right: 10%;
            }
        }

        /* TASKBAR */
        .taskbar {
            position: absolute;
            left: 0px;
            right: 0px;
            bottom: 0px;
            height: 44px;
            background: #FFFFFF;
            color: var(--text);
            display: flex;
            justify-content: space-between;
            gap: 8px;
            padding: 6px 8px;
            box-shadow:
                inset 2px 2px 0 var(--border-light),
                inset -2px -2px 0 var(--border-dark);
            z-index: 20;
            font-size: 0.8rem;
        }

        .taskbar-left,
        .taskbar-right {
            display: flex;
            ;
            align-items: center;
            gap: 6px;
        }

        .taskbar-left {
            flex: 0 0 auto;
        }

        .taskbar-middle {
            flex: 1 1 auto;
            justify-content: center;
        }

        .taskbar-right {
            flex: 0 0 auto;
        }

        .start-btn {
            background: var(--bg-window);
            border: none;
            color: var(--text);
            padding: 6px 10px;
            font-weight: bold;
            cursor: pointer;
            box-shadow:
                inset 2px 2px 0 var(--border-light),
                inset -2px -2px 0 var(--border-dark);
        }

        .task-btn {
            background: var(--bg-window);
            color: var(--text);
            padding: 6px 10px;
            border-radius: 3px;
            cursor: pointer;
            opacity: 0.95;
            box-shadow:
                inset 2px 2px 0 var(--border-light),
                inset -2px -2px 0 var(--border-dark);
        }

        .task-btn.active {
            background: var(--accent);
            color: #fff;
            opacity: 1;
            box-shadow:
                inset 2px 2px 0 var(--border-light),
                inset -2px -2px 0 var(--border-dark);
        }

        .tray-item {
            background: var(--bg-window);
            color: var(--text);
            opacity: 0.95;
            padding: 4px 6px;
            box-shadow:
                inset 2px 2px 0 var(--border-light),
                inset -2px -2px 0 var(--border-dark);
            border-radius: 3px;
        }

        @media (max-width: 500px) {
            .taskbar-middle {
                display: none;
            }

            .start-btn {
                padding: 5px 8px;
            }
        }
    </style>
</head>

<body>

    <section class="window">

        <!-- Icons -->
        <div class="icons">
            <div class="icon" onclick="updateWindows('shiny')">
                <div class="icon-box">Shiny</div>
                <span class="icon-title">Shiny.exe</span>
            </div>

            <div class="icon" onclick="updateWindows('rin')">
                <div class="icon-box">Rin</div>
                <span class="icon-title">Rin.exe</span>
            </div>
        </div>

        <div class="window-body">
            <!-- Webcam / Main content -->
            <div class="webcam" id="mainContent">
            </div>
        </div>

        <!-- Popup -->
        <div class="description" id="description">
        </div>

        <!-- Taskbar (bottom) -->
        <div class="taskbar" role="toolbar" aria-label="taskbar">
            <div class="taskbar-left">
                <button class="start-btn" onclick="closeBoth()">START</button>
            </div>
            <div class="taskbar-right">
                <div class="tray-item" id="clock">--:--</div>
            </div>
        </div>
    </section>

    <script>

        // Class OC

        class OC {
            constructor(name, image, description) {
                this.name = name;
                this.image = image;
                this.description = description;
            }
        }

        // Instances OC

        let shiny = new OC(
            "Shiny",
            "https://media.discordapp.net/attachments/1282588500264357919/1458154413846696089/Shiny_yipee.png?ex=6961e75f&is=696095df&hm=4b7b20cbd3c60cf6d4583809bd0b016602bb94dbe3cf705b4264a82f572c3ab2&=&format=webp&quality=lossless&width=1430&height=953",
            `Shiny is a cheerful and energetic, known for their vibrant personality and love for adventure. They have a knack for bringing joy to those around them and are always up for trying new things, with a heart full of kindness and a spirit that shines bright.`
        );

        let rin = new OC(
            "Rin",
            "https://media.discordapp.net/attachments/1380542314203578590/1380542446542258320/Thereishandseverywhere_v3.png?ex=6964fa58&is=6963a8d8&hm=f0ddc30af5b05ccb65a004290cdc9662d6646fb58f13437f351705eac3baff4b&=&format=webp&quality=lossless&width=881&height=881",
            `emo girl.
            Also cute`
        );

        const OC_MAP = {
            shiny: shiny,
            rin: rin
        };

        // Fonctions d'affichage des fenêtres avec les informations des OC

        function updateWindows(oc) {
            const main = document.getElementById("mainContent");
            const description = document.getElementById("description");

            // accept either an OC instance or a string key (case-insensitive)
            let resolved = oc;
            // if nothing is provided, stop
            if (!resolved) return;
            if (typeof resolved === 'string') {
                const key = resolved.toLowerCase();
                // stop if the provided name doesn't exist
                if (!OC_MAP[key]) return;
                resolved = OC_MAP[key];
            }

            main.style.display = "block";
            description.style.display = "block";

            main.innerHTML = `
                <div class="window-header">
                    <span>Webcam.exe</span>
                    <span class="close" onclick="closeWebcam()">✕</span>
                </div>
                <div class="webcam-body">
                    <img src="${resolved.image}" alt="webcam">
                </div>
            `;

            description.innerHTML = `
                <div class="description-header">
                    <span>${resolved.name}.exe</span>
                    <span class="close" onclick="closeDescription()">✕</span>
                </div>
                <div class="description-body">
                    ${resolved.description}
                </div>
            `;
        }

        function closeDescription() {
            const description = document.getElementById("description");
            description.style.display = "none";
        }

        function closeWebcam() {
            const main = document.getElementById("mainContent");
            main.style.display = "none";
        }

        function closeBoth() {
            closeWebcam();
            closeDescription();
        }

        function updateClock() {
            const el = document.getElementById('clock');
            if (!el) return;
            const now = new Date();
            const h = String(now.getHours()).padStart(2, '0');
            const m = String(now.getMinutes()).padStart(2, '0');
            el.textContent = `${h}:${m}`;
        }

        setInterval(updateClock, 1000);

        document.addEventListener("DOMContentLoaded", function () {
            closeBoth()
            updateClock();
        });
    </script>

</body>

</html>


<!-- TODO -->

<!-- 

- Changer l'affichage webcam et description description
- Mettre webcam et description en display none au chargement (déjà fait pour la description)
- Créer un tableau d'objets pour chaque OC (Img webcam, texte info etc) 
    et une fonction pour changer d'OC (Changer updateWindows() en updateWindows(OC) 
    pour afficher le bon oc en fonction de l'argument) 

-->